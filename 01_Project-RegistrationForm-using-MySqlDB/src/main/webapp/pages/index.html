<!DOCTYPE html>
<html>

<head>
	<meta charset="ISO-8859-1">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<title>Registration Form</title>
</head>

<body>
	<div class="container">
		<form id="registrationForm">
			<h1>Deployed resurces</h1>
			<h2>Registration Form</h2>
			<table>
				<tr>
					<td><label for="firstname">First Name:</label></td>
					<td><input placeholder="first name" id="firstname" name="firstname" required /></td>
				</tr>

				<tr>
					<td><label for="lastname">Last Name:</label></td>
					<td><input placeholder="surname" type="text" id="lastname" name="lastname" required /></td>
				</tr>

				<tr>
					<td><label for="dob">DoB:</label></td>
					<td><input placeholder="dd/mm/yyyy" type="text" id="dob" name="dob" required /></td>
				</tr>
				<tr>
					<td><label for="gender">Gender:</label></td>
					<td><input placeholder="gender" type="text" id="gender" name="gender" required /></td>
				</tr>
				<tr>
					<td><label for="name">Contact:</label></td>
					<td><input placeholder="10-digit" type="text" id="contact" name="name" required /></td>
				</tr>
				<tr>
					<td><label for="email">Email:</label></td>
					<td><input placeholder="someone@gmail.com" type="email" id="email" name="email" required /></td>
				</tr>
				<tr>
					<td><label for="address">Address:</label></td>
					<td><input placeholder="address" type="text" id="address" name="address" required /></td>
				</tr>
				<tr>
					<td><label for="state">State:</label></td>
					<td><input placeholder="eg.New Delhi" type="text" id="state" name="state" required /></td>
				</tr>
				<tr>
					<td><label for="pincode">Pincode:</label></td>
					<td><input placeholder="pincode" type="text" id="pincode" name="pincode" required /></td>
				</tr>
				<tr>
					<td><label for="country">Country:</label></td>
					<td><input placeholder="eg.India" type="text" id="country" name="country" required /></td>
				</tr>
			</table>
			<div class="button-container">
				<button id="submitbtn" type="submit">Register</button>
				<button id="resetbtn">Reset</button>
			</div>
		</form>
	</div>
	
	<script>
		let bntclr = document.querySelector('#resetbtn');
		let inputFields = document.querySelectorAll('input');

		bntclr.addEventListener('click', () => {
			inputFields.forEach(input => input.value = '');
		});

		let sbmtbtn = document.getElementById('submitbtn');

		sbmtbtn.addEventListener('click', buttonClickHandler);

		function buttonClickHandler() {
			var FirstName = document.getElementById('firstname').value;
			var LastName = document.getElementById('lastname').value;
			var DoB = document.getElementById('dob').value;
			var Gender = document.getElementById('gender').value;
			var Contact = document.getElementById('contact').value;
			var Email = document.getElementById('email').value;
			var Address = document.getElementById('address').value;
			var State = document.getElementById('state').value;
			var PinCode = document.getElementById('pincode').value;
			var Country = document.getElementById('country').value;

			var dataToSend = {
				"firstName": FirstName,
				"lastName": LastName,
				"doB": DoB,
				"gender": Gender,
				"contact": Contact,
				"email": Email,
				"address": Address,
				"state": State,
				"pinCode": PinCode,
				"country": Country
			}

			$.ajax({
				url: "/register",
				type: "POST",
				data: JSON.stringify(dataToSend),
				dataType: "json",
				contentType: "application/json",
				success: function (response) {
					console.log(response);
					console.log("Registration Success!")
					window.location.href = "success.html";
				},
				error: function (XMLHttpRequest) {
					console.error("Failed to Register" + XMLHttpRequest.status, "Error");
							console.error("Response Text: " + XMLHttpRequest.responseText);
				}
			});
		}
	</script>
</body>

</html>